# Data Field Configuration for alpha-canvas
# This file defines data field aliases and their database access specifications

# Example: Adjusted close price
adj_close:
  db_type: parquet
  table: PRICEVOLUME
  index_col: date
  security_col: security_id
  value_col: adj_close
  query: >
    SELECT 
      date, 
      security_id, 
      close_price * adjustment_factor as adj_close 
    FROM read_parquet('data/fake/pricevolume.parquet')
    WHERE date >= :start_date 
      AND date <= :end_date

# Example: Trading volume
volume:
  db_type: parquet
  table: PRICEVOLUME
  index_col: date
  security_col: security_id
  value_col: volume
  query: >
    SELECT 
      date, 
      security_id, 
      volume 
    FROM read_parquet('data/fake/pricevolume.parquet')
    WHERE date >= :start_date 
      AND date <= :end_date

# Example: Market capitalization
market_cap:
  table: FUNDAMENTALS
  index_col: date
  security_col: securities
  value_col: market_cap
  query: >
    SELECT 
      DATE as date, 
      TICKER as securities, 
      SHARES_OUTSTANDING * CLOSE as market_cap 
    FROM FUNDAMENTALS
    WHERE DATE >= :start_date 
      AND DATE <= :end_date

# Example: GICS Sub-Industry (for grouping/neutralization)
subindustry:
  table: SECURITY_MASTER
  index_col: date
  security_col: securities
  value_col: GICS_SUBINDUSTRY
  query: >
    SELECT 
      DATE as date, 
      TICKER as securities, 
      GICS_SUBINDUSTRY 
    FROM SECURITY_MASTER
    WHERE DATE >= :start_date 
      AND DATE <= :end_date

# Example: Daily returns
returns:
  db_type: parquet
  table: PRICEVOLUME
  index_col: date
  security_col: security_id
  value_col: return
  query: >
    SELECT 
      date, 
      security_id, 
      return 
    FROM read_parquet('data/fake/pricevolume.parquet')
    WHERE date >= :start_date 
      AND date <= :end_date

# ============================================================================
# FnGuide Real Data (Processed by ETL)
# ============================================================================

# FnGuide: Adjusted close price (수정주가)
fnguide_adj_close:
  db_type: parquet
  table: FNGUIDE_PRICE
  index_col: date
  security_col: symbol
  value_col: adj_close
  query: >
    SELECT 
      date, 
      symbol, 
      adj_close 
    FROM read_parquet('data/fnguide/price/**/*.parquet', hive_partitioning=true)
    WHERE date >= :start_date 
      AND date <= :end_date

# FnGuide: Trading value (거래대금)
fnguide_trading_value:
  db_type: parquet
  table: FNGUIDE_PRICE
  index_col: date
  security_col: symbol
  value_col: trading_value
  query: >
    SELECT 
      date, 
      symbol, 
      trading_value 
    FROM read_parquet('data/fnguide/price/**/*.parquet', hive_partitioning=true)
    WHERE date >= :start_date 
      AND date <= :end_date

# FnGuide: Industry group classification (산업 그룹)
fnguide_industry_group:
  db_type: parquet
  table: FNGUIDE_GROUPS
  index_col: date
  security_col: symbol
  value_col: fn_industry_group
  query: >
    SELECT 
      date, 
      symbol, 
      fn_industry_group 
    FROM read_parquet('data/fnguide/groups/**/*.parquet', hive_partitioning=true)
    WHERE date >= :start_date 
      AND date <= :end_date

